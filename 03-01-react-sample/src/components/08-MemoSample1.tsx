import { memo, useState } from 'react'

/** ğŸ“Œ useCallbackê³¼ useMemo - ë©”ëª¨ì´ì œì´ì…˜ í›…
 * ê°’ì´ë‚˜ í•¨ìˆ˜ë¥¼ ìœ ì§€í•˜ê³ , ë¶ˆí•„ìš”í•œ ìì‹ìš”ì†Œì˜ ë Œë”ë§ì´ë‚˜ ê³„ì‚°ì„ ì–µì œí•˜ê¸° ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤.
 * ì´ í›…ë“¤ì„ ì„¤ëª…í•˜ê¸° ì „, ìš°ì„  ë¦¬ì•¡íŠ¸ì˜ í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë¦¬ëŠ” ì‹œì ê³¼ ë©”ëª¨ì´ì œì´ì…˜ ì»´í¬ë„ŒíŠ¸ì— ê´€í•´ ì„¤ëª…í•©ë‹ˆë‹¤.
 *
 * ë¦¬ì•¡íŠ¸ì˜ ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‹œì ì— í™”ë©´ì— ë‹¤ì‹œ ê·¸ë ¤ì§‘ë‹ˆë‹¤.
 * - propsë‚˜ ë‚´ë¶€ ìƒíƒœê°€ ì—…ë°ì´íŠ¸ ëì„ ë–„
 * - ì»´í¬ë„Œí‹ ì•ˆì—ì„œ ì°¸ì¡°í•˜ëŠ” Context ê°’ì´ ì—…ë°ì´íŠ¸ëì„ ë–„
 * - ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ê·¸ë ¤ì¡Œì„ ë–„
 *
 * ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ê·¸ë ¤ì§€ë©´, ë¬´ì¡°ê±´ ìì‹ ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ì‹œ ê·¸ë ¤ì§‘ë‹ˆë‹¤.
 * ê·¸ë ‡ê¸°ì— ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— í™”ë©´ ë‹¤ì‹œ ê·¸ë¦¬ê¸°ê°€ ë°œìƒˆì•„ë©´, ê·¸ ì´í•˜ì˜ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì— í™”ë©´ ë‹¤ì‹œ ê·¸ë¦¬ê¸°ê°€ ë°œìƒí•©ë‹ˆë‹¤.
 * ì´ í™”ë©´ ë‹¤ì‹œ ê·¸ë¦¬ê¸°ê°€ ì „íŒŒë˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´, ë©”ëª¨ì´ì œì´ì…˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
 *
 * ë©”ëª¨ì´ì œì´ì…˜ ì»´í¬ë„ŒíŠ¸ëŠ” ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ ë‹¤ì‹œ ê·¸ë¦¬ê¸°ê°€ ë°œìƒí•˜ê±°ë‚˜,
 * propsë‚˜ context ê°’ì´ ë°”ë€Œì§€ ì•Šì€ ê²½ìš°ì—ëŠ” ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì— ì˜í•œ í™”ë©´ ë‹¤ì‹œ ê·¸ë¦¬ê¸°ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
 *
 * ğŸ’¡ ë©”ëª¨ì´ì œì´ì…˜ ì»´í¬ë„ŒíŠ¸ëŠ” í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ë¥¼ memo í•¨ìˆ˜ë¡œ ê°ì‹¸ì„œ ì‘ì„±í•©ë‹ˆë‹¤.
 *
 * ğŸ‘‡ ì•„ë˜ëŠ” ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì¹´ìš´íŠ¸ë¥¼ êµ¬í˜„í•˜ê³ ,
 * ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ Fizzì™€ Buzzì— ê°ê° í”Œë˜ê·¸ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.
 * ì½˜ì†”ì„ í™•ì¸í•´ë³´ë©´,
 * ì¹´ìš´íŠ¸ê°€ ì¦ê°€í•  ë–„ë§ˆë‹¤, Parentì™€ Fizzê°€ í™”ë©´ì— ë‹¤ì‹œ ê·¸ë ¤ì§‘ë‹ˆë‹¤.
 * ë°˜ë©´, BuzzëŠ” isBuzzê°€ ë‹¬ë¦¬ì§ˆ ë•Œë§Œ í™”ë©´ì— ë‹¤ì‹œ ê·¸ë ¤ì§‘ë‹ˆë‹¤.
 *
 * í•˜ì§€ë§Œ, ë©”ëª¨ì´ì œì´ì…˜ ì»´í¬ë„ŒíŠ¸ì— í•¨ìˆ˜ë‚˜ ê°ì²´ë¥¼ ì „ë‹¬í•˜ë©´, ë‹¤ì‹œ ë¶€ëª¨ì˜ í™”ë©´ì´ ë‹¤ì‹œ ê·¸ë ¤ì§ˆ ë–„,
 * ì»´í¬ë„ŒíŠ¸ ì—­ì‹œ ë‹¤ì‹œ ê·¸ë ¤ì§‘ë‹ˆë‹¤.
 * ì´ëŠ” í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë¦´ ë–„ë§ˆë‹¤, Parentì— ìƒˆë¡œ ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ê°€ Buzzì— ì „ë‹¬ë˜ì–´ ë‹¤ì‹œ ê·¸ë ¤ì§€ëŠ” ê²ë‹ˆë‹¤.
 * í™”ë©´ ë‹¤ì‹œ ê·¸ë¦¬ê¸°ë¥¼ ì–µì œí•˜ë ¤ë©´, ê°™ì€ í•¨ìˆ˜ë¥¼ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.
 */

type FizzProps = {
  isFizz: boolean
}

/** ğŸ“Œ FizzëŠ” ë³´í†µ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
 * isFizzê°€ trueì´ë©´ Fizzë¼ê³  í‘œì‹œí•˜ê³ , ê·¸ ì´ì™¸ì—ëŠ” ì•„ë¬´ê²ƒë„ í‘œì‹œí•˜ì§€ ì•ŠëŠ”ë‹¤
 * isFizzì˜ ë³€í™”ì— ê´€ê³„ì—†ì´, ë¶€ëª¨ê°€ ë‹¤ì‹œ ê·¸ë ¤ì§€ë©´ Fizzë„ ë‹¤ì‹œ ê·¸ë ¤ì§„ë‹¤
 */
const Fizz = (props: FizzProps) => {
  const { isFizz } = props
  console.log(`Fizzê°€ ë‹¤ì‹œ ê·¸ë ¤ì¡ŒìŠµë‹ˆë‹¤. isFizz=${isFizz}`)
  return <span>{isFizz ? 'Fizz' : ''}</span>
}

type BuzzProps = {
  isBuzz: boolean
}

/** ğŸ“Œ BuzzëŠ” ë©”ëª¨ì´ì œì´ì…˜í•œ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
 * isBuzzê°€ trueì´ë©´ Buzzë¼ í‘œì‹œí•˜ê³ , ê·¸ ì´ì™¸ì—ëŠ” ì•„ë¬´ê²ƒë„ í‘œì‹œí•˜ì§€ ì•ŠëŠ”ë‹¤
 * ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ê·¸ë ¤ì ¸ë„, isBuzzê°€ ë°”ë€Œì§€ ì•ŠëŠ” í•œ BuzzëŠ” ë‹¤ì‹œ ê·¸ë ¤ì§€ì§€ ì•ŠëŠ”ë‹¤
 */
const Buzz = memo<BuzzProps>(props => {
  const { isBuzz } = props
  console.log(`Buzzê°€ ë‹¤ì‹œ ê·¸ë ¤ì¡ŒìŠµë‹ˆë‹¤. izBuzz=${isBuzz}`)
  return <span>{isBuzz ? 'Buzz' : ''}</span>
})

const Parent = () => {
  const [count, setCount] = useState(1)
  const isFizz = count % 3 === 0
  const isBuzz = count % 5 === 0

  console.log(`Parentê°€ ë‹¤ì‹œ ê·¸ë ¤ì¡ŒìŠµë‹ˆë‹¤. count=${count}`)

  return (
    <div>
      <button onClick={() => setCount(c => c + 1)}>+1</button>
      <p>{`í¸ì¬ ì¹´ìš´íŠ¸: ${count}`}</p>
      <p>
        <Fizz isFizz={isFizz} />
        <Buzz isBuzz={isBuzz} />
      </p>
    </div>
  )
}

export default Parent
